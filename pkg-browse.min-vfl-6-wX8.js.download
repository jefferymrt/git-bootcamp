define("modules/clean/base64",["require","exports"],function(e,t){"use strict";function i(e){var t=[],i=0,r=0,o=0,s=0,n=0;for(e+="";i<e.length;)o=e.charCodeAt(i),o<128?(t[r++]=String.fromCharCode(o),i++):o>191&&o<224?(s=e.charCodeAt(i+1),t[r++]=String.fromCharCode((31&o)<<6|63&s),i+=2):(s=e.charCodeAt(i+1),n=e.charCodeAt(i+2),t[r++]=String.fromCharCode((15&o)<<12|(63&s)<<6|63&n),i+=3);return t.join("")}function r(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=void 0,r=void 0,o=void 0,s=void 0,n=void 0,a=void 0,l=void 0,u=void 0,_=0,c=0,d="",p=[];if(!e)return e;for(;;)if(i=e.charCodeAt(_++),r=e.charCodeAt(_++),o=e.charCodeAt(_++),u=i<<16|r<<8|o,s=u>>18&63,n=u>>12&63,a=u>>6&63,l=63&u,p[c++]=t.charAt(s)+t.charAt(n)+t.charAt(a)+t.charAt(l),!(_<e.length))break;d=p.join("");var S=e.length%3;return(S?d.slice(0,S-3):d)+"===".slice(S||3)}function o(e,t){var r=function(e){return e},o=t?r:i;if("function"==typeof window.atob)return o(window.atob(e));var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=0,a=0,l=[];if(!e)return e;for(e+="";;){var u=s.indexOf(e.charAt(n++)),_=s.indexOf(e.charAt(n++)),c=s.indexOf(e.charAt(n++)),d=s.indexOf(e.charAt(n++)),p=u<<18|_<<12|c<<6|d,S=p>>16&255,E=p>>8&255,f=255&p;if(l[a++]=64===c?String.fromCharCode(S):64===d?String.fromCharCode(S,E):String.fromCharCode(S,E,f),!(n<e.length))break}var T=l.join("");return T=o(T)}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=r,t.decode=o}),define("modules/clean/react/browse/action_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/filepath","modules/clean/react/browse/logger_util","modules/clean/search/search_bar/data/store","modules/clean/search/search_bar/data/selectors","modules/clean/web_user_action_events","modules/clean/analytics","modules/clean/logging/hive/schemas/web-user-action","modules/clean/logging/telemetry"],function(e,t,i,r,o,s,n,a,l,u,_,c){"use strict";function d(e,r,n,a,l,u,c){var d={num_files_selected:a,num_folders_selected:l,source:r,view_type:u};if(s.isFile(c)){var p=c,S=p.request_id,E=p.ns_id,f=p.sjid,T=p.file_id,h=p.fq_path,F=p.bytes,y=p.ext;d=i.__assign({},d,{request_id:S,file_nsid:E,file_sjid:f,file_id:T,file_name:o.filename(h),file_path:h,file_size:F,file_extension:y})}else if(s.isPaper(c)){var p=c,S=p.request_id;d=i.__assign({},d,{request_id:S})}t.hiveLogger.log(new _.WebUserActionRow({user_id:e,event_name:n,source:r,view_type:u,request_id:d.request_id,file_nsid:d.file_nsid,file_sjid:d.file_sjid,file_id:d.file_id,file_name:d.file_name,file_path:d.file_path,file_size:d.file_size,file_extension:d.file_extension,extra:{num_files_selected:d.num_files_selected?d.num_files_selected.toString():null,num_folders_selected:d.num_folders_selected?d.num_folders_selected.toString():null}}))}function p(e){var i=e.uid,r=e.entity_type,o=e.view_type,s=e.file_nsid,n=e.file_sjid,a=e.file_id,u=e.file_name,c=e.file_path,d=e.file_size,p=e.file_extension,S=e.request_id;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SELECT_ROW,view_type:o,file_nsid:s,file_sjid:n,file_id:a,file_name:u,file_path:c,file_size:d,file_extension:p,request_id:S,extra:{entity_type:r}}))}function S(e){var i=e.uid,r=e.entity_type,o=e.source,s=e.view_type,n=e.file_nsid,a=e.file_sjid,u=e.file_id,c=e.file_name,d=e.file_path,p=e.file_size,S=e.file_extension,E=e.request_id;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.OPEN_ROW,source:o,view_type:s,file_nsid:n,file_sjid:a,file_id:u,file_name:c,file_path:d,file_size:p,file_extension:S,request_id:E,extra:{entity_type:r}}))}function E(e){var i=e.uid,r=e.view_type;e.file_nsid,e.file_path,e.file_name;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.CREATE_FOLDER,view_type:r}))}function f(e){var i=e.uid,r=e.modal_session_id,o=e.file_nsid,s=e.file_sjid,n=e.file_id,a=e.file_name,u=e.file_path;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.VIEW_SHARE_MODEL,file_nsid:o,file_sjid:s,file_id:n,file_name:a,file_path:u,extra:{modal_session_id:r}}))}function T(e){var i=e.uid,r=e.show_deleted_files,o=e.view_type;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.TOGGLE_DELETED_FILES,view_type:o,extra:{show_deleted_files:r.toString()}}))}function h(e){var i=e.uid,r=e.sort_by,o=e.sort_direction,s=e.view_type;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SORT_RECORDS,view_type:s,extra:{sort_by:r,sort_direction:o}}))}function F(e){var i=e.uid,r=e.isSearchMode,o=e.viewType;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.SWITCH_VIEW_TYPE,view_type:o})),r&&u.SearchClientActivityLogger.log("switch_view_type",i,{search_session_id:a.searchSessionId(n.getStoreForSearchBar().getState()),view_type:o})}function y(e){var i=e.uid,r=e.source,o=e.view_type,s=e.file_nsid,n=e.file_path,a=e.file_name,u=e.num_files_selected,c=e.num_folders_selected;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.RESTORE,source:r,view_type:o,file_nsid:s,file_path:n,file_name:a,extra:{num_files_selected:u?u.toString():null,num_folders_selected:c?c.toString():null}}))}function m(e){var i=e.uid,r=e.event_name,o=e.selectedPath;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:r,extra:o?{selectedPath:o}:{}}))}function A(e){var t=e.error_message,i=e.event_name,o=e.team_id,s=e.url;r.TeamsWebActionsLogger.log(i,{team_id:o,url:s,error_message:t})}function v(e){var t=e.uid,i=e.source,r=e.view_type,o=e.result,s=e.num_files_selected,n=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.MOVE,s,n,r,o)}function O(e){var t=e.uid,i=e.source,r=e.view_type,o=e.result,s=e.num_files_selected,n=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.OPEN_ADD_TO_COLLECTION_MODAL,s,n,r,o)}function g(e){var t=e.uid,i=e.source,r=e.view_type,o=e.result,s=e.num_files_selected,n=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.COPY,s,n,r,o)}function w(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.VERSIONS,o,s,r)}function I(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.OPEN_MOVE_MODAL,o,s,r)}function L(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.RENAME,o,s,r)}function P(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.ADD_COMMENT,o,s,r)}function N(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.DOWNLOAD,o,s,r)}function D(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.OPEN_COPY_MODAL,o,s,r)}function R(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.DELETE,o,s,r)}function C(e){var t=e.uid,i=e.source,r=e.view_type,o=e.num_files_selected,s=e.num_folders_selected;d(t,i,l.WebUserActionLogEvent.PERMANENT_DELETE,o,s,r)}function x(e){var i=e.uid,r=e.file_name,o=e.upload_id,s=e.all_fsw_ids,n=e.filtered_fsw_ids;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,event_name:l.WebUserActionLogEvent.FILE_UPLOAD_FSW_RETURNED,file_name:r,upload_id:o,all_fsw_ids:s,filtered_fsw_ids:n}))}function b(e){var i=e.uid,r=e.source,o=e.action,s=e.depth_folder_selected;t.hiveLogger.log(new _.WebUserActionRow({user_id:i,source:r,event_name:o,extra:{depth_folder_selected:s?s.toString():null}}))}Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),a=i.__importStar(a),c=i.__importStar(c);(function(e){e.MAESTRO_RIGHT_SIDEBAR="MAESTRO_RIGHT_SIDEBAR",e.MAESTRO_PHOTOS_RIGHT_SIDEBAR="MAESTRO_PHOTOS_RIGHT_SIDEBAR",e.LEGACY_HEADER_ACTIONS="LEGACY_HEADER_ACTIONS",e.DRAG="DRAG"})(t.BrowseLogEventSource||(t.BrowseLogEventSource={})),t.hiveLogger=new c.HiveLogger,t.logBrowseAction=d,t.logSelectRow=p,t.logOpenRow=S,t.logCreateFolder=E,t.logViewShareModel=f,t.logToggleDeletedFiles=T,t.logSortRecords=h,t.logSwitchViewType=F,t.logRestore=y,t.logFileOperationModalClick=m,t.logOpenLocalCopyAction=A,t.logMoveFiles=v,t.logOpenAddToCollectionModal=O,t.logCopyFiles=g,t.logVersions=w,t.logOpenMoveModal=I,t.logRenameFiles=L,t.logAddComment=P,t.logDownload=N,t.logOpenCopyModal=D,t.logDeleteFiles=R,t.logPermanentDeleteFiles=C,t.logFileUploadFSWReturned=x,t.logFileCreateClick=b}),define("modules/clean/react/browse/data/action_creators",["require","exports","tslib","modules/clean/react/browse/action_logger","modules/clean/react/browse/constants","modules/clean/react/browse/data/selectors","modules/clean/react/browse/data/types","modules/clean/react/files_view/constants","modules/clean/storage","modules/core/cookies"],function(e,t,i,r,o,s,n,a,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i.__importStar(s);t.appInit=function(e){var t=e.experiments,i=e.shouldShowDeletedFiles,r=e.user,o=e.viewer;return{type:n.ActionTypes.APP_INIT,payload:{experiments:t,shouldShowDeletedFiles:i,user:r,viewer:o}}},t.selectFilesByFqPath=function(e){var t=e.fqPathsToSelect;return{type:n.ActionTypes.SELECT_FILES_BY_FQ_PATH,payload:{fqPathsToSelect:t}}},t.setCanDisplayFolderSizes=function(e){var t=e.canDisplayFolderSizes;return{type:n.ActionTypes.SET_CAN_DISPLAY_FOLDER_SIZES,payload:{canDisplayFolderSizes:t}}},t.setClipboardFiles=function(e){var t=e.clipboardFiles;return{type:n.ActionTypes.SET_CLIPBOARD_FILES,payload:{clipboardFiles:t}}},t.setContext=function(e){var t=e.context;return{type:n.ActionTypes.SET_CONTEXT,payload:{context:t}}},t.setBrowsePostTTIExperiments=function(e){var t=e.browsePostTTIExperiments;return{type:n.ActionTypes.SET_BROWSE_POST_TTI_EXPERIMENTS,payload:{browsePostTTIExperiments:t}}},t.setFileJumpFilter=function(e){var t=e.fileJumpFilter;return{type:n.ActionTypes.SET_FILE_JUMP_FILTER,payload:{fileJumpFilter:t}}},t.addFileJumpKeyCode=function(e){var i=e.keyChar;return function(e,r){var o=s.fileJumpFilter(r())+i.toLowerCase();e(t.setFileJumpFilter({fileJumpFilter:o}));for(var n=null,a=s.fileJumpIndex(r()),l=0,u=a;l<u.length;l++){var _=u[l],c=_.fqPath;if(_.filename>=o){n=c;break}}null!=n&&e(t.selectFilesByFqPath({fqPathsToSelect:[n]}))}},t.setFilePathsToSelectOnNextUpdate=function(e){var t=e.filePathsToSelectOnNextUpdate;return{type:n.ActionTypes.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE,payload:{filePathsToSelectOnNextUpdate:t}}},t.showTimeline=function(){return{type:n.ActionTypes.SHOW_TIMELINE,payload:{}}},t.hideTimeline=function(){return{type:n.ActionTypes.HIDE_TIMELINE,payload:{}}},t.setFileRename=function(e){var t=e.file,i=e.renameState;return{type:n.ActionTypes.SET_FILE_RENAME,payload:{file:t,renameState:i}}},t.setFolderSizes=function(e){var t=e.folderSizes;return{type:n.ActionTypes.SET_FOLDER_SIZES,payload:{folderSizes:t}}},t.setLoadingState=function(e){var t=e.loadingState,i=e.path;return{type:n.ActionTypes.SET_LOADING_STATE,payload:{loadingState:t,path:i}}},t.setMountPoints=function(e){var t=e.mountPoints;return{type:n.ActionTypes.SET_MOUNT_POINTS,payload:{mountPoints:t}}},t.setNewFolderCreationState=function(e){var t=e.newFolderCreationState;return{type:n.ActionTypes.SET_NEW_FOLDER_CREATION_STATE,payload:{newFolderCreationState:t}}},t.setPaginatedTotalNumFiles=function(e){var t=e.paginatedTotalNumFiles;return{type:n.ActionTypes.SET_PAGINATED_TOTAL_NUM_FILES,payload:{paginatedTotalNumFiles:t}}},t.setPath=function(e){var t=e.path;return{type:n.ActionTypes.SET_PATH,payload:{path:t}}},t.setSelection=function(e){var t=e.selection;return{type:n.ActionTypes.SET_SELECTION,payload:{selection:t}}},t.setShouldShowDeletedFiles=function(e){var t=e.shouldShowDeletedFiles;return{type:n.ActionTypes.SET_SHOULD_SHOW_DELETED_FILES,payload:{shouldShowDeletedFiles:t}}};var _=function(e){var t=e.sortOrder;return{type:n.ActionTypes.SET_SORT_ORDER,payload:{sortOrder:t}}};t.restoreSortOrder=function(){return function(e,t){var i=u.Cookies.read(o.BROWSE_SORT_COOKIE_NAME);if(i&&i.indexOf("|")>-1){var r=i.split("|",2),n={sortField:r[0],sortDirection:r[1]},a=s.sortOrder(t());n.sortDirection===a.sortDirection&&n.sortField===a.sortField||e(_({sortOrder:n}))}}},t.setAndStoreSortOrder=function(e){var t=e.sortOrder;return function(e,i){u.Cookies.delete(o.BROWSE_SORT_COOKIE_NAME);var r=t.sortField+"|"+t.sortDirection;u.Cookies.create(o.BROWSE_SORT_COOKIE_NAME,r,1095),e(_({sortOrder:t}))}},t.setUnsortedFiles=function(e){var t=e.unsortedFiles;return{type:n.ActionTypes.SET_UNSORTED_FILES,payload:{unsortedFiles:t}}},t.setAndStoreViewType=function(e){var t=e.viewType,i=e.isSearchMode;return function(e,n){var a=s.user(n()).id;u.Cookies.delete(o.VIEW_TYPE_COOKIE_NAME),u.Cookies.create(o.VIEW_TYPE_COOKIE_NAME,t,1095),r.logSwitchViewType({uid:a,isSearchMode:i,viewType:t}),e(c({viewType:t}))}};var c=function(e){var t=e.viewType;return{type:n.ActionTypes.SET_VIEW_TYPE,payload:{viewType:t}}};t.restoreViewType=function(){return function(e,t){var i=u.Cookies.read(o.VIEW_TYPE_COOKIE_NAME);null!==i&&i!==s.viewType(t())&&e(c({viewType:i}))}};var d=function(e){var t=e.viewTypeColumns;return{type:n.ActionTypes.SET_VIEW_TYPE_COLUMNS,payload:{viewTypeColumns:t}}};t.setAndStoreViewTypeColumns=function(e){var t=e.columns,r=e.viewType;return function(e,n){var a=s.user(n()).id;l.UserLocalStorage.set(a,o.COLUMNS_STORAGE_KEY+"_"+r,t),e(d({viewTypeColumns:i.__assign({},s.viewTypeColumns(n()),(u={},u[r]=t,u))}));var u}},t.restoreViewTypeColumns=function(){return function(e,t){var i=s.user(t()).id,r=s.viewTypeColumns(t());a.AllViewTypes.forEach(function(e){var t=l.UserLocalStorage.get(i,o.COLUMNS_STORAGE_KEY+"_"+e);t&&(r[e]=t)}),e(d({viewTypeColumns:r}))}},t.requestFolderSizes=function(e){var t=e.fqPath;return{type:n.ActionTypes.REQUEST_FOLDER_SIZES,payload:{fqPath:t}}},t.setFolderSizesPending=function(e){var t=e.fetchFolderSizesResp;return{type:n.ActionTypes.SET_FOLDER_SIZES_PENDING,payload:{fetchFolderSizesResp:t}}},t.completeFolderSizes=function(e){var t=e.fetchFolderSizeState;return{type:n.ActionTypes.COMPLETE_FOLDER_SIZES,payload:{fetchFolderSizeState:t}}}}),define("modules/clean/react/browse/data/reducer",["require","exports","tslib","external/immutable","modules/clean/filepath","modules/clean/react/browse/data/types","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/selection","modules/core/exception"],function(e,t,i,r,o,s,n,a,l,u,_){"use strict";function c(e,t){var r=t.payload,o=r.experiments,s=r.shouldShowDeletedFiles,n=r.user,a=r.viewer;return _.assert(null===e.user,"Cannot reinitialize Browse store; changing invariants such as `user` is untested"),i.__assign({},e,{experiments:o,shouldShowDeletedFiles:s,user:n,viewer:a})}function d(e,t){var o=t.payload.fqPathsToSelect,s=o.map(function(e){return e.toLowerCase()}),n=e.unsortedFiles.toList().filter(function(e){return s.includes(e.fq_path.toLowerCase())}),a=n.map(function(e){return e.fq_path}),l=r.OrderedSet(a),u=a.size?a.get(0):null;return i.__assign({},e,{selection:e.selection.set("selected",l).set("anchor",u)})}function p(e,t){var r=t.payload.canDisplayFolderSizes;return i.__assign({},e,{canDisplayFolderSizes:r})}function S(e,t){var r=t.payload.clipboardFiles;return i.__assign({},e,{clipboardFiles:r})}function E(e,t){var r=t.payload.context;return i.__assign({},e,{context:r})}function f(e,t){var r=t.payload.fileJumpFilter;return i.__assign({},e,{fileJumpFilter:r})}function T(e,t){var r=t.payload.filePathsToSelectOnNextUpdate;return i.__assign({},e,{filePathsToSelectOnNextUpdate:r})}function h(e,t){var r=t.payload,o=r.file,s=r.renameState;return s?i.__assign({},e,{fileRename:{file:o,state:s}}):i.__assign({},e,{fileRename:null})}function F(e,t){var r=t.payload.folderSizes;return i.__assign({},e,{folderSizes:r})}function y(e,t){var s=t.payload,n=s.loadingState,a=s.path;return o.paths_are_equal(a,e.path)?n===l.LoadingState.LOADED?i.__assign({},e,{loadingState:n,filePathsToSelectOnNextUpdate:r.Set()}):i.__assign({},e,{loadingState:n}):e}function m(e,t){var o=t.payload.mountPoints;return i.__assign({},e,{mountPoints:r.Map(o)})}function A(e,t){var r=t.payload.newFolderCreationState;return i.__assign({},e,{newFolderCreationState:r})}function v(e,t){var r=t.payload.paginatedTotalNumFiles;return i.__assign({},e,{paginatedTotalNumFiles:r})}function O(e,t){var r=t.payload.path;return i.__assign({},e,{path:r})}function g(e,t){var r=t.payload.selection;return i.__assign({},e,{selection:r})}function w(e,t){var r=t.payload.shouldShowDeletedFiles;return i.__assign({},e,{shouldShowDeletedFiles:r})}function I(e,t){var r=t.payload.sortOrder;return i.__assign({},e,{sortOrder:r})}function L(e,t){var r=t.payload.unsortedFiles;return i.__assign({},e,{unsortedFiles:r})}function P(e,t){var r=t.payload.viewType;return i.__assign({},e,{viewType:r})}function N(e,t){var r=t.payload.browsePostTTIExperiments;return i.__assign({},e,{browsePostTTIExperiments:r})}function D(e,t){var r=t.payload.viewTypeColumns;return i.__assign({},e,{viewTypeColumns:r})}function R(e,t){var r=t.payload.fqPath;if(e.isQueryingFolderSizes)return e;var o=e.folderSizes.withMutations(function(e){e.set(r,{size:0,state:l.FetchFolderSizeState.LOADING})});return i.__assign({},e,{folderSizes:o,isQueryingFolderSizes:!0})}function C(e,t){var r=t.payload.fetchFolderSizesResp,o=e.currentFolderSizesQuery,s=e.folderSizes.withMutations(function(e){for(var t=function(t){e.update(t.fq_path,{size:0,state:l.FetchFolderSizeState.LOADING},function(e){return{size:e.size+t.size,state:l.FetchFolderSizeState.LOADING}}),o=o.withMutations(function(e){return e.add(t.fq_path)})},i=0,s=r.sizes_dict;i<s.length;i++){t(s[i])}});return i.__assign({},e,{currentFolderSizesQuery:o,folderSizes:s})}function x(e,t){var o=t.payload.fetchFolderSizeState,s=e.folderSizes.withMutations(function(t){e.currentFolderSizesQuery.forEach(function(i){var r=e.folderSizes.get(i);r&&t.update(i,function(){return{size:r.size,state:o}})})});return i.__assign({},e,{currentFolderSizesQuery:r.Set(),folderSizes:s,isQueryingFolderSizes:!1})}function b(e,t){return i.__assign({},e,{isTimelineVisible:!0})}function U(e,t){return i.__assign({},e,{isTimelineVisible:!1})}function z(e,i){switch(void 0===e&&(e=t.defaultBrowseState),i.type){case s.ActionTypes.APP_INIT:return c(e,i);case s.ActionTypes.RESET_TO_DEFAULT_FOR_TESTS_ONLY:return t.defaultBrowseState;case s.ActionTypes.SELECT_FILES_BY_FQ_PATH:return d(e,i);case s.ActionTypes.SET_CAN_DISPLAY_FOLDER_SIZES:return p(e,i);case s.ActionTypes.SET_CLIPBOARD_FILES:return S(e,i);case s.ActionTypes.SET_CONTEXT:return E(e,i);case s.ActionTypes.SET_FILE_JUMP_FILTER:return f(e,i);case s.ActionTypes.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE:return T(e,i);case s.ActionTypes.SET_FILE_RENAME:return h(e,i);case s.ActionTypes.SET_FOLDER_SIZES:return F(e,i);case s.ActionTypes.SET_LOADING_STATE:return y(e,i);case s.ActionTypes.SET_MOUNT_POINTS:return m(e,i);case s.ActionTypes.SET_NEW_FOLDER_CREATION_STATE:return A(e,i);case s.ActionTypes.SET_PAGINATED_TOTAL_NUM_FILES:return v(e,i);case s.ActionTypes.SET_PATH:return O(e,i);case s.ActionTypes.SET_SELECTION:return g(e,i);case s.ActionTypes.SET_SHOULD_SHOW_DELETED_FILES:return w(e,i);case s.ActionTypes.SET_SORT_ORDER:return I(e,i);case s.ActionTypes.SET_UNSORTED_FILES:return L(e,i);case s.ActionTypes.SET_VIEW_TYPE:return P(e,i);case s.ActionTypes.SHOW_TIMELINE:return b(e,i);case s.ActionTypes.HIDE_TIMELINE:return U(e,i);case s.ActionTypes.SET_VIEW_TYPE_COLUMNS:return D(e,i);case s.ActionTypes.REQUEST_FOLDER_SIZES:return R(e,i);case s.ActionTypes.SET_FOLDER_SIZES_PENDING:return C(e,i);case s.ActionTypes.COMPLETE_FOLDER_SIZES:return x(e,i);case s.ActionTypes.SET_BROWSE_POST_TTI_EXPERIMENTS:return N(e,i)}return e}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),o=i.__importStar(o),t.defaultBrowseState={canDisplayFolderSizes:!1,clipboardFiles:[],context:new n.BrowseContext,experiments:{},browsePostTTIExperiments:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:r.Set(),fileRename:null,folderSizes:r.Map(),isTimelineVisible:!1,loadingState:l.LoadingState.LOADING_FIRST_PAGE,mountPoints:null,newFolderCreationState:l.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:u.createSelection(),shouldShowDeletedFiles:!1,sortOrder:{sortField:l.SortField.FILENAME,sortDirection:l.SortDirection.ASCENDING},user:null,unsortedFiles:r.Map(),viewer:null,viewType:l.ViewType.List,viewTypeColumns:(M={},M[l.ViewType.List]=a.LIST_VIEW_COLUMNS,M[l.ViewType.Grid]=a.GRID_VIEW_COLUMNS,M[l.ViewType.LargeGrid]=a.GRID_VIEW_COLUMNS,M),currentFolderSizesQuery:r.Set(),isQueryingFolderSizes:!1},t.browseReducer=z;var M}),define("modules/clean/react/browse/data/selectors",["require","exports","tslib","external/immutable","external/reselect","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/data/reducer","modules/clean/react/browse/uri_helper","modules/clean/react/browse/util","modules/clean/react/files_view/types","modules/clean/redux/selectors","modules/clean/redux/types","modules/core/browser","modules/core/exception"],function(e,t,i,r,o,s,n,a,l,u,_,c,d,p,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),s=i.__importStar(s),p=i.__importStar(p);var E=function(e){return c.getStateAtNamespace(e,d.BROWSE_NAMESPACE_KEY)||a.defaultBrowseState};t.canDisplayFolderSizes=function(e){return E(e).canDisplayFolderSizes},t.clipboardFiles=function(e){return E(e).clipboardFiles},t.context=function(e){return E(e).context},t.experiments=function(e){return E(e).experiments},t.postTTIExperiments=function(e){return E(e).browsePostTTIExperiments},t.fileJumpFilter=function(e){return E(e).fileJumpFilter},t.filePathsToSelectOnNextUpdate=function(e){return E(e).filePathsToSelectOnNextUpdate},t.fileRename=function(e){return E(e).fileRename},t.folderSizes=function(e){return E(e).folderSizes},t.isFileJumping=function(e){return E(e).fileJumpFilter.length>0},t.isQueryingFolderSizes=function(e){return E(e).isQueryingFolderSizes},t.loadingState=function(e){return E(e).loadingState},t.mountPoints=function(e){return E(e).mountPoints},t.newFolderCreationState=function(e){return E(e).newFolderCreationState},t.paginatedTotalNumFiles=function(e){return t.loadingState(e)===_.LoadingState.LOADED?t.sortedFiles(e).count():E(e).paginatedTotalNumFiles},t.path=function(e){return E(e).path},t.selection=function(e){return E(e).selection},t.shouldShowDeletedFiles=function(e){return E(e).shouldShowDeletedFiles},t.sortOrder=function(e){return E(e).sortOrder},t.unsortedFiles=function(e){return E(e).unsortedFiles},t.user=function(e){var t=E(e).user;return S.assert(null!=t,"Browse store `user` accessed before APP_INIT action"),t},t.viewer=function(e){var t=E(e).viewer;return S.assert(null!=t,"Browse store `viewer` accessed before APP_INIT action"),t},t.viewType=function(e){return E(e).viewType},t.viewTypeColumns=function(e){return E(e).viewTypeColumns},t.isTimelineVisible=function(e){return E(e).isTimelineVisible},t.fileJumpIndex=o.createSelector(t.unsortedFiles,function(e){return e.keySeq().toArray().map(function(e){return{filename:s.filename(e).toLowerCase(),fqPath:e}}).sort(function(e,t){return e.filename<t.filename?-1:e.filename>t.filename?1:0})}),t.sortedFiles=o.createSelector(t.unsortedFiles,t.sortOrder,t.folderSizes,function(e,t,i){return u.sortFiles(e.toList(),t,i,p.mac)}),t.selectedFiles=o.createSelector(t.sortedFiles,t.selection,function(e,t){if(t.selected.isEmpty()||e.isEmpty())return r.OrderedMap();var i=e.filter(function(e){return t.selected.has(e.fq_path)});return r.OrderedMap(i.map(function(e){return[e.fq_path,e]}))}),t.urlPrefix=o.createSelector(t.user,t.viewer,function(e,t){return l.browse_root(t,e)}),t.teamFolders=o.createSelector(t.unsortedFiles,t.folderSizes,function(e,t){var i={sortField:_.SortField.FILENAME,sortDirection:_.SortDirection.ASCENDING};return u.sortFiles(e.toList().filter(function(e){return e.type===n.FileTypes.TEAM_SHARED_FOLDER}),i,t,p.mac)}),t.sortedFilesWithFolderSizes=o.createSelector(t.sortedFiles,t.folderSizes,function(e,t){return e.map(function(e){var i=t.get(e.fq_path);return i?e.updateSize(i.size,i.state):e})}),t.unsortedFilesWithFolderSizes=o.createSelector(t.unsortedFiles,t.folderSizes,function(e,t){return e.withMutations(function(i){t.forEach(function(t,r){var o=e.get(r);if(o&&t){var s=o.updateSize(t.size,t.state);i.set(r,s)}})})}),t.sortedFilesWithFoldersSizesWithoutTeamFolders=o.createSelector(t.sortedFilesWithFolderSizes,function(e){return e.filter(function(e){return e.type!==n.FileTypes.TEAM_SHARED_FOLDER})}),t.shouldShowPinnedTeamFolders=o.createSelector(t.context,t.loadingState,t.path,t.teamFolders,t.viewType,function(e,t,i,r,o){return e.showPinnedTeamFolder&&!r.isEmpty()&&s.paths_are_equal(i,"/")&&o===_.ViewType.List&&(t===_.LoadingState.LOADED||t===_.LoadingState.LOADING_REMAINING_PAGES)})}),define("modules/clean/react/browse/data/store",["require","exports","modules/clean/redux/types","modules/clean/react/browse/data/reducer","modules/clean/redux/store"],function(e,t,i,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s;t.getStoreForBrowse=function(){return s||(s=o.getStoreAndRegisterReducers((e={},e[i.BROWSE_NAMESPACE_KEY]=r.browseReducer,e))),s;var e}}),define("modules/clean/react/browse/data/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.RESET_TO_DEFAULT_FOR_TESTS_ONLY="BROWSE/RESET_TO_DEFAULT_FOR_TESTS_ONLY",e.APP_INIT="BROWSE/APP_INIT",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SHOW_TIMELINE="BROWSE/SHOW_TIMELINE",e.HIDE_TIMELINE="BROWSE/HIDE_TIMELINE",e.SET_BROWSE_POST_TTI_EXPERIMENTS="BROWSE/SET_BROWSE_POST_TTI_EXPERIMENTS",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FILE_RENAME="BROWSE/SET_FILE_RENAME",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_MOUNT_POINTS="BROWSE/SET_MOUNT_POINTS",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_VIEW_TYPE="BROWSE/SET_VIEW_TYPE",e.SET_VIEW_TYPE_COLUMNS="BROWSE/SET_VIEW_TYPE_COLUMNS",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES"})(t.ActionTypes||(t.ActionTypes={}))}),define("modules/clean/react/browse/store",["require","exports","tslib","modules/clean/filepath","external/immutable","modules/clean/react/browse/data/action_creators","modules/clean/react/browse/data/selectors","modules/clean/react/browse/data/store","modules/core/exception","modules/clean/react/browse/models","modules/clean/react/selection","modules/clean/flux/base_store","modules/clean/react/browse/constants","modules/clean/react/files_view/constants","modules/clean/react/files_view/types"],function(e,t,i,r,o,s,n,a,l,u,_,c,d,p,S){"use strict";function E(){return null===h&&(h=new T),h}function f(){return null!==h}Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r),o=i.__importStar(o),s=i.__importStar(s),n=i.__importStar(n),a=i.__importStar(a);var T=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype._init=function(){this._reduxStore=a.getStoreForBrowse()},t.prototype.sortedFiles=function(){return n.sortedFiles(this._reduxStore.getState())},t.prototype.unsortedFiles=function(){return n.unsortedFiles(this._reduxStore.getState())},t.prototype.setUnsortedFiles=function(e){this._reduxStore.dispatch(s.setUnsortedFiles({unsortedFiles:e}))},t.prototype.files=function(){return n.sortedFilesWithFolderSizes(this._reduxStore.getState())},t.prototype.filesMap=function(){return n.unsortedFilesWithFolderSizes(this._reduxStore.getState())},t.prototype.filesWithoutTeamFolders=function(){return n.sortedFilesWithFoldersSizesWithoutTeamFolders(this._reduxStore.getState())},t.prototype.teamFolders=function(){return n.teamFolders(this._reduxStore.getState())},t.prototype.path=function(){return n.path(this._reduxStore.getState())},t.prototype.user=function(){return n.user(this._reduxStore.getState())},t.prototype.viewer=function(){return n.viewer(this._reduxStore.getState())},t.prototype.urlPrefix=function(){return n.urlPrefix(this._reduxStore.getState())},t.prototype.selection=function(){return n.selection(this._reduxStore.getState())},t.prototype.paginatedTotalNumFiles=function(){return n.paginatedTotalNumFiles(this._reduxStore.getState())},t.prototype.selectedFiles=function(){return n.selectedFiles(this._reduxStore.getState())},t.prototype.loadingState=function(){return n.loadingState(this._reduxStore.getState())},t.prototype.context=function(){return n.context(this._reduxStore.getState())},t.prototype.mountPoints=function(){return n.mountPoints(this._reduxStore.getState())},t.prototype.shouldShowDeletedFiles=function(){return n.shouldShowDeletedFiles(this._reduxStore.getState())},t.prototype.isTimelineVisible=function(){return n.isTimelineVisible(this._reduxStore.getState())},t.prototype.currentSort=function(){return n.sortOrder(this._reduxStore.getState())},t.prototype.sortIsAscending=function(){return this.currentSort().sortDirection===S.SortDirection.ASCENDING},t.prototype.sortLabel=function(){return p.SortIsFilename.includes(this.currentSort().sortField)?S.SortLabel.FILENAME:this.currentSort().sortField===S.SortField.MODIFIED?S.SortLabel.MODIFIED:S.SortLabel.SIZE},t.prototype.viewType=function(){return n.viewType(this._reduxStore.getState())},t.prototype.viewTypeColumns=function(){return n.viewTypeColumns(this._reduxStore.getState())},t.prototype.getIndexOfFile=function(e){return this.sortedFiles().findIndex(function(t){return t.sjid===e.sjid&&t.ns_id===e.ns_id})},t.prototype.getFileByFilename=function(e){return this.sortedFiles().find(function(t){return r.filename(t.fq_path)===e})||null},t.prototype.getFileByFullPath=function(e){return this.sortedFiles().find(function(t){return t.fq_path===e})||null},t.prototype.clipboardFiles=function(){return n.clipboardFiles(this._reduxStore.getState())},t.prototype.fileRename=function(){return n.fileRename(this._reduxStore.getState())},t.prototype.newFolderCreationState=function(){return n.newFolderCreationState(this._reduxStore.getState())},t.prototype.isFileJumping=function(){return n.isFileJumping(this._reduxStore.getState())},t.prototype.canDisplayFolderSizes=function(){return n.canDisplayFolderSizes(this._reduxStore.getState())},t.prototype.isQueryingFolderSizes=function(){return n.isQueryingFolderSizes(this._reduxStore.getState())},t.prototype.experiments=function(){return n.experiments(this._reduxStore.getState())},t.prototype.postTTIExperiments=function(){return n.postTTIExperiments(this._reduxStore.getState())},t.prototype.filePathsToSelectOnNextUpdate=function(){return n.filePathsToSelectOnNextUpdate(this._reduxStore.getState())},t.prototype.folderSizes=function(){return n.folderSizes(this._reduxStore.getState())},t.prototype.activeFileJumpFilter=function(){return n.fileJumpFilter(this._reduxStore.getState())},t.prototype.initializeEverything=function(e){var t=e.path,i=e.files,r=e.paginatedTotalNumFiles,o=e.context,n=e.mountPoints,a=e.fqPathsToSelect,l=e.loadingState,u=e.teamFolders;this.setPath({path:t}),this.appendFiles({
path:t,files:i.concat(u),paginatedTotalNumFiles:r},!1),this.setMountPoints({mountPoints:n}),this.setLoadingState({path:t,loadingState:l}),l===S.LoadingState.LOADED?this.selectFqPaths({fqPathsToSelect:a},!1):this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:a}),this._reduxStore.dispatch(s.setContext({context:o})),this.emit_change()},t.prototype.appInit=function(e){var t=e.experiments,i=e.shouldShowDeletedFiles,r=e.user,o=e.viewer;this._reduxStore.dispatch(s.appInit({experiments:t,shouldShowDeletedFiles:i,user:r,viewer:o})),this._reduxStore.dispatch(s.restoreViewType()),this._reduxStore.dispatch(s.restoreViewTypeColumns()),this._reduxStore.dispatch(s.restoreSortOrder())},t.prototype.setPathData=function(e,t){var i=e.path,o=e.files,n=e.paginatedTotalNumFiles,a=e.context;void 0===t&&(t=!0),r.paths_are_equal(i,this.path())&&(this.setUnsortedFiles(this.unsortedFiles().clear()),this._reduxStore.dispatch(s.setSelection({selection:_.createSelection()})),this.appendFiles({path:i,files:o,paginatedTotalNumFiles:n},!1),this._reduxStore.dispatch(s.setContext({context:a})),t&&this.emit_change())},t.prototype.clearFiles=function(e){var t=e.path,i=e.context;r.paths_are_equal(t,this.path())&&(this.setUnsortedFiles(this.unsortedFiles().clear()),this._reduxStore.dispatch(s.setSelection({selection:_.createSelection()})),this._reduxStore.dispatch(s.setPaginatedTotalNumFiles({paginatedTotalNumFiles:0})),this._reduxStore.dispatch(s.setContext({context:i})),this.emit_change())},t.prototype.appendFiles=function(e,t){var i=e.path,n=e.files,a=e.paginatedTotalNumFiles;if(void 0===t&&(t=!0),r.paths_are_equal(i,this.path())){for(var _=[],c=[],d=0,p=n;d<p.length;d++){var S=p[d],E=S instanceof u.File?S:u.File.fromServerObject(S);_.push([S.fq_path,E]),this.unsortedFiles().has(S.fq_path)||c.push(E)}var f=this.unsortedFiles().size;this.setUnsortedFiles(this.unsortedFiles().merge(o.Map(_))),this.unsortedFiles().size!==f+n.length&&l.reportException({err:new Error("appendFiles ended up with unexpected number of files."),tags:["browse_file_collections_mismatch"],severity:l.SEVERITY.CRITICAL,exc_extra:{previous_unsorted_files_size:f,incoming_files_size:n.length,updated_unsorted_files_size:this.unsortedFiles().size,is_deleted_files_on:this.shouldShowDeletedFiles()}}),this.filePathsToSelectOnNextUpdate().count()&&this.selectFqPaths({fqPathsToSelect:this.filePathsToSelectOnNextUpdate().toArray()},!1),this._reduxStore.dispatch(s.setPaginatedTotalNumFiles({paginatedTotalNumFiles:a})),t&&this.emit_change()}},t.prototype.applyFileDeltas=function(e){var t=e.path,i=e.fileDeltas;if(r.paths_are_equal(t,this.path())){for(var o=this.unsortedFiles().size,s=0,n=i;s<n.length;s++){var a=n[s],u=a.before,_=a.after;!u&&_&&(o+=1),u&&!_&&(o-=1),this.applyFileDelta({before:u,after:_,pathForDelta:t})}if(this.filePathsToSelectOnNextUpdate().size){this.selectFqPaths({fqPathsToSelect:this.filePathsToSelectOnNextUpdate().toArray()},!1).size===this.filePathsToSelectOnNextUpdate().size&&this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:[]})}this.unsortedFiles().size!==o&&l.reportException({err:new Error("applyFileDeltas ended up with unexpected number of items"),tags:["browse_file_collections_mismatch"],severity:l.SEVERITY.CRITICAL,exc_extra:{expected_unsorted_files_size:o,actual_unsorted_files_size:this.unsortedFiles().size,is_deleted_files_on:this.shouldShowDeletedFiles(),fileDeltas:i}}),this.emit_change()}},t.prototype.setPath=function(e){var t=e.path;this._reduxStore.dispatch(s.setPath({path:t})),this.emit_change()},t.prototype.setLoadingState=function(e){var t=e.path,i=e.loadingState;this._reduxStore.dispatch(s.setLoadingState({loadingState:i,path:t})),this.emit_change()},t.prototype.setMountPoints=function(e){var t=e.mountPoints;this._reduxStore.dispatch(s.setMountPoints({mountPoints:t}))},t.prototype.setSelection=function(e){var t=e.selection;this._reduxStore.dispatch(s.setSelection({selection:t})),this.emit_change()},t.prototype.selectFilesAfterUpload=function(e){var t=this,i=e.fqPathsToSelect;i.every(function(e){return t.filesMap().has(e)})?this.selectFqPaths({fqPathsToSelect:i}):this.setFilePathsToSelectOnNextUpdate({fqPathsToSelect:i})},t.prototype.selectFqPaths=function(e,t){var i=e.fqPathsToSelect;return void 0===t&&(t=!0),this._reduxStore.dispatch(s.selectFilesByFqPath({fqPathsToSelect:i})),t&&this.emit_change(),this.selection().selected},t.prototype.setShouldShowDeletedFiles=function(e){var t=e.shouldShowDeletedFiles;this._reduxStore.dispatch(s.setShouldShowDeletedFiles({shouldShowDeletedFiles:t})),this.emit_change()},t.prototype.setViewType=function(e){var t=e.viewType,i=e.isSearchMode;this._reduxStore.dispatch(s.setAndStoreViewType({viewType:t,isSearchMode:!!i})),this.emit_change()},t.prototype.setColumnDependentCapabilities=function(e){var t=e.canDisplayFolderSizes;this.canDisplayFolderSizes()!==t&&(this._reduxStore.dispatch(s.setCanDisplayFolderSizes({canDisplayFolderSizes:t})),this.emit_change())},t.prototype.setColumnConfiguration=function(e){var t=e.columns,i=e.viewType,r=e.canDisplayFolderSizes;this._reduxStore.dispatch(s.setAndStoreViewTypeColumns({columns:t,viewType:i})),this._reduxStore.dispatch(s.setCanDisplayFolderSizes({canDisplayFolderSizes:r})),this.emit_change()},t.prototype.sortFiles=function(e,t){void 0===t&&(t=!0),this._reduxStore.dispatch(s.setAndStoreSortOrder({sortOrder:e})),t&&this.emit_change()},t.prototype.setClipboardToFiles=function(e){this._reduxStore.dispatch(s.setClipboardFiles({clipboardFiles:e})),this.emit_change()},t.prototype.updateRenameState=function(e,t){this._reduxStore.dispatch(s.setFileRename({file:e,renameState:t})),this.emit_change()},t.prototype.setNewFolderCreationState=function(e){this._reduxStore.dispatch(s.setNewFolderCreationState({newFolderCreationState:e})),this.emit_change()},t.prototype.setFilePathsToSelectOnNextUpdate=function(e){var t=e.fqPathsToSelect,i=void 0===t?[]:t;this._reduxStore.dispatch(s.setFilePathsToSelectOnNextUpdate({filePathsToSelectOnNextUpdate:o.Set(i)}))},t.prototype.showTimeline=function(){this._reduxStore.dispatch(s.showTimeline()),this.emit_change()},t.prototype.hideTimeline=function(){this._reduxStore.dispatch(s.hideTimeline()),this.emit_change()},t.prototype.setBrowsePostTTIExperiments=function(e){var t=e.browsePostTTIExperiments;this._reduxStore.dispatch(s.setBrowsePostTTIExperiments({browsePostTTIExperiments:t})),this.emit_change()},t.prototype.addFileJumpKeyCode=function(e){var t=e.keyChar;this._reduxStore.dispatch(s.addFileJumpKeyCode({keyChar:t})),this.emit_change()},t.prototype.resetFileJump=function(){this._reduxStore.dispatch(s.setFileJumpFilter({fileJumpFilter:""}))},t.prototype.applyFileDelta=function(e){var t=e.before,i=e.after,o=e.pathForDelta;if(i&&!r.paths_are_equal(r.parent_dir(i.fq_path),o)&&(i=null),i!==t){var s=i&&this.unsortedFiles().get(i.fq_path);if(!(s&&s.sjid>=i.sjid)){if(this.fileRename()&&i&&t){var n=this.folderSizes().get(t.fq_path);n&&this.setFolderSizes(this.folderSizes().set(i.fq_path,{size:n.size,state:n.state}))}return t&&this.setFolderSizes(this.folderSizes().delete(t.fq_path)),i&&t?this.replaceFile({existingFile:t,newFile:i}):i&&!t?this.insertOrUpdateFile({file:i}):t&&!i?this.removeFile({file:t}):void 0}}},t.prototype.insertOrUpdateFile=function(e){var t=e.file;this.setUnsortedFiles(this.unsortedFiles().set(t.fq_path,t))},t.prototype.removeFile=function(e){var t=e.file;l.assert(this.unsortedFiles().has(t.fq_path),"trying to remove a file that doesn't exist in the file map"),this.setUnsortedFiles(this.unsortedFiles().delete(t.fq_path))},t.prototype.replaceFile=function(e){function t(e){return e.fq_path.toLowerCase()===o}var i=e.existingFile,r=e.newFile;l.assert(this.unsortedFiles().has(i.fq_path),"tried to replace file, but previous file doesn't exist in map");var o=i.fq_path.toLowerCase(),s=this.sortedFiles().findEntry(t),n=s?s[0]:-1;if(l.assert(n!==-1,"tried to update file, but previous file doesn't exist in sorted list"),i.fq_path===r.fq_path)this.setUnsortedFiles(this.unsortedFiles().set(i.fq_path,r));else{this.setUnsortedFiles(this.unsortedFiles().delete(i.fq_path).set(r.fq_path,r));var a=this.fileRename();a&&a.state===S.RenameState.SAVING_INPUT&&(this.updateRenameState(i,null),this.selectFqPaths({fqPathsToSelect:[r.fq_path]}))}},t.prototype.requestFolderSizes=function(e){this._reduxStore.dispatch(s.requestFolderSizes({fqPath:e})),this.emit_change()},t.prototype.setFolderSizesPending=function(e){this._reduxStore.dispatch(s.setFolderSizesPending({fetchFolderSizesResp:e})),this.emit_change()},t.prototype.completeFolderSizes=function(e){this._reduxStore.dispatch(s.completeFolderSizes({fetchFolderSizeState:e})),this.emit_change()},t.prototype.setFolderSizes=function(e){this._reduxStore.dispatch(s.setFolderSizes({folderSizes:e}))},t.prototype._new_payload=function(e){var t=e.action;switch(t.type){case d.BrowseActionType.APP_INIT:this.appInit(t.data);break;case d.BrowseActionType.INITIALIZE_EVERYTHING:this.initializeEverything(t.data);break;case d.BrowseActionType.LOAD_PATH:this.setPathData(t.data,!1),this.setLoadingState({path:t.data.path,loadingState:S.LoadingState.LOADED});break;case d.BrowseActionType.CLEAR_FILES:this.clearFiles(t.data);break;case d.BrowseActionType.ADD_FILES_AND_SET_LOADING_STATE:this.appendFiles(t.data,!1),this.setLoadingState(t.data);break;case d.BrowseActionType.SET_PATH:this.setPath(t.data);break;case d.BrowseActionType.CHANGE_FILES:this.applyFileDeltas(t.data);break;case d.BrowseActionType.SET_SELECTION:this.setSelection(t.data);break;case d.BrowseActionType.SELECT_FILES_AFTER_UPLOAD:this.selectFilesAfterUpload(t.data);break;case d.BrowseActionType.SELECT_FILES_BY_FQ_PATH:this.selectFqPaths(t.data);break;case d.BrowseActionType.SET_LOADING_STATE:this.setLoadingState(t.data);break;case d.BrowseActionType.SET_MOUNT_POINTS:this.setMountPoints(t.data);break;case d.BrowseActionType.SET_SHOULD_SHOW_DELETED_FILES:this.setShouldShowDeletedFiles(t.data);break;case d.BrowseActionType.COPY_FILES_TO_CLIPBOARD:this.setClipboardToFiles(t.data.files);break;case d.BrowseActionType.SET_VIEW_TYPE:this.setViewType(t.data);break;case d.BrowseActionType.SORT_FILES:this.sortFiles(t.data);break;case d.BrowseActionType.REQUEST_NEW_FILE_NAME:this.updateRenameState(t.data.file,S.RenameState.PENDING_INPUT);break;case d.BrowseActionType.SET_FILE_RENAME_PENDING:this.updateRenameState(t.data.file,S.RenameState.SAVING_INPUT);break;case d.BrowseActionType.SET_FILE_RENAME_COMPLETE:case d.BrowseActionType.CANCEL_FILE_RENAME:this.updateRenameState(t.data.file,null);break;case d.BrowseActionType.REQUEST_FOLDER_NAME:this.setNewFolderCreationState(S.NewFolderCreationState.PENDING_INPUT);break;case d.BrowseActionType.CREATE_FOLDER_PENDING:this.setNewFolderCreationState(S.NewFolderCreationState.SAVING_INPUT);break;case d.BrowseActionType.CREATE_FOLDER_COMPLETE:case d.BrowseActionType.CANCEL_CREATE_FOLDER:this.setNewFolderCreationState(S.NewFolderCreationState.CREATE_FOLDER_INACTIVE);break;case d.BrowseActionType.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE:this.setFilePathsToSelectOnNextUpdate(t.data);break;case d.BrowseActionType.ADD_FILE_JUMP_KEY_CODE:this.addFileJumpKeyCode(t.data);break;case d.BrowseActionType.RESET_FILE_JUMP:this.resetFileJump();break;case d.BrowseActionType.REQUEST_FETCH_FOLDER_SIZES:this.requestFolderSizes(t.data.fqPath);break;case d.BrowseActionType.FETCHED_FOLDER_SIZES:this.setFolderSizesPending(t.data.resp);break;case d.BrowseActionType.COMPLETE_FETCH_FOLDER_SIZES:this.completeFolderSizes(t.data.state);break;case d.BrowseActionType.SET_COLUMN_DEPENDENT_CAPABILITIES:this.setColumnDependentCapabilities(t.data);break;case d.BrowseActionType.SET_COLUMN_CONFIGURATION:this.setColumnConfiguration(t.data);break;case d.BrowseActionType.SHOW_TIMELINE:this.showTimeline();break;case d.BrowseActionType.HIDE_TIMELINE:this.hideTimeline();break;case d.BrowseActionType.SET_BROWSE_POST_TTI_EXPERIMENTS:this.setBrowsePostTTIExperiments(t.data)}},t})(c.Store);t.BrowseStore=T;var h=null;t.getBrowseStore=E,t.browseStoreInstantiated=f});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/search_success_banner/search_success_banner",["require","exports","modules/clean/react/async/loadable"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchSuccessBanner=i.Loadable({loader:function(){return new Promise(function(t,i){e(["modules/clean/react/search_success_banner/search_success_component"],t,i)}).then(__importStar).then(function(e){return e.SearchSuccessBanner})}})});
//# sourceMappingURL=pkg-browse.min.js-vfl1RyF9M.map